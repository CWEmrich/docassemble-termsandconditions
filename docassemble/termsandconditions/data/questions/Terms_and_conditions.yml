---
include:
  - docassemble.AssemblyLine:assembly_line.yml
---
#features: 
#  bootstrap theme: termsandconditions.css
#---
#features:
#  css:
#    - styles.css
---
default screen parts:
  pre: |
---
metadata:
  title: >-
    Terms and conditions generator
  short title: >-
    Terms and conditions
  description: |-
    Terms and conditions
  tags: []
  authors:
    - Stavros Constantinou 
    - Christopher Emrich
  allowed_courts: []
  typical_role: "unknown"
  al_weaver_version: "1.10.1"
  generated_on: "2023-08-04"
---
code: |
  # This controls the default country and list of states in address field questions
  AL_DEFAULT_COUNTRY = "US"
---
code: |
  # This controls the default state in address field questions
  AL_DEFAULT_STATE = ""
---
code: |
  github_repo_name = 'docassemble-TermsAndConditions'
---
code: |
  interview_short_title = "Get a Terms and conditions"
---
code: |
  al_form_type = "other" 
---
code: |
  AL_ORGANIZATION_TITLE = "Lemma Legal"
---
code: |
  AL_ORGANIZATION_HOMEPAGE = "https://lemmalegal.com/"
---
objects:
  - organizations: ALPeopleList.using(complete_attribute="complete")
  - al_logo: DAStaticFile.using(filename="LL_white.svg")
  - sources: DAList.using(ask_number=True, complete_attribute="complete")
  - choices: DAList
---
sections:
  - Introduction
  - Answer questions
  - Preview
  - Download
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_Terms_and_conditions
code: |
  # Set the allowed courts for this interview
  allowed_courts = []
  organizations.gather(number=1)
  set_progress(20)
  website_free_to_use = True
  if sources.there_are_any:
    sources[0]
  set_progress(40)
  use_google_services
  text_and_email
  set_progress(60)
  other_technology_choices
  set_progress(80)
  terms_and_conditions_preview_question
  interview_order_Terms_and_conditions = True
---
code: |
  organizations[i].name.first
  organizations[i].address.address
  organizations[i].email
  organizations[i].complete = True
---
###################### Main order ######################
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  al_intro_screen
  interview_order_Terms_and_conditions
  signature_date
  # Store anonymous data for analytics / statistics
  store_variables_snapshot(
      persistent=True,
      data={
          "zip": showifdef("users[0].address.zip"),
          "reached_interview_end": True,
      },
  )
  Terms_and_conditions_download
---
id: is the website free
question: |  
  Is ${ organizations[0].name }'s website or tool free to use?
yesno: website_free_to_use
---
code: |
  sources[i]
  sources[i].complete = True
---
id: other information
question: |
  Does ${ organizations[0].name } include information from any other sources?
suquestion: |
  For example, information from other legal aid or non profits.
fields: 
  - no label: sources.there_are_any
    datatype: yesnoradio
---  
id: information about other sources
question: |
  What other sources does ${ organizations[0].name } use?
fields:
  - Source: sources[i]
list collect: True
---
id: use google services
question: |
  Does ${ organizations[0].name } use Google services?
subquestion: |
  Such as Google Maps and Google Analytics.
yesno: use_google_services
---
id: text and email services
question: |
  Does ${ organizations[0].name } use text and email delivery services?
yesno: text_and_email

#---
#id: other choices
#question: |
# Does your business use any technologies that banks and online stores use to keep information safe?
#fields: 
#  - How many other technologies does you business use?: choices.target_number
#    datatype: integer
---  
id: information about other choices
question: |
  What other supporting technology does ${ organizations[0].name } use?
fields:
  - Other technologies: other_technology_choices
    datatype: checkboxes
    choices: 
      - 256 bit encryption
      - Software firewalls
      - Limited access controls
      - Continual monitoring
      - Regular security updates
---
#      - Other
#  - Explain: other_choice_description
#    show if: other_technology_choices['Other']
---
id: basic questions intro screen
decoration: form-lineal
question: |
  Terms and conditions generator
subquestion: |
  This interview will provide you with plain language terms and conditions and privacy policy for your organization's legal aid tool product. 
  
  The terms and conditions are made for legal aid organizations to improve free legal help. They can be edited later.
  
  You'll need to answer questions about the organization and then download the terms and conditions. 
  
fields:
  - To continue, you must accept our [terms of use](${ AL_ORGANIZATION_HOMEPAGE }/privacy/): acknowledged_information_use
    datatype: checkboxes
    none of the above: False    
    minlength: 1
    choices:
      - I accept the terms of use.
    validation messages:
      minlength: |
        You cannot continue unless you agree to the terms of use.        
continue button field: al_intro_screen
terms:
  green words: |
    Green words are legal terms or a short way of referring to something that needs more explanation. The definition or explanation pops up when you tap the green words. 
section: Introduction
---
id: organization email
question: |
  ${ organizations[0] }'s email
fields:
  - Email: organizations[0].email
    datatype: email
---
id: name of the first org
sets:
  - organizations[i].name.first
  - organizations[i].name.middle
  - organizations[i].name.last
  - organizations[i].name.suffix
question: |
  Name of the organization you are creating terms and conditions for
fields:
  - Organization name: organizations[i].name.first
section: Answer questions
---
sets:
  - organizations[i].address.address
  - organizations[i].address.city
  - organizations[i].address.zip
  - organizations[i].address.unit
  - organizations[i].address.state
  - organizations[i].address.country
id: organization address
question: |
  ${ organizations[0] }'s address
fields:
  - code: |
      organizations[i].address_fields(country_code=AL_DEFAULT_COUNTRY)
---
id: preview Terms_and_conditions
question: |
  Preview ${ organizations[0] }'s terms and conditions
subquestion: |
  Here is a preview of ${ organizations[0] }'s terms and conditions and privacy policy.
  
  ${ al_court_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Edit answers" button
  to edit your answers.

  ${ action_button_html(url_action('review_Terms_and_conditions'), label='Edit answers', color='info') }
  
  Remember to come back to this window to continue.

continue button field: terms_and_conditions_preview_question    
section: Preview
---
table: organizations.table
rows: organizations
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Email: |
      row_item.email if defined("row_item.email") else ""
edit:
  - name.first
  - address.address
  - email
confirm: True
---
id: Terms and conditions review screen
event: review_Terms_and_conditions
question: |
  Review your answers
review:
  - Edit: 
      - organizations[0].name.first
      - organizations[0].address.address
      - organizations[0].email
    button: |
      **Organization**

      - Name: **${organizations[0].name}**
      
      - Address: **${organizations[0].address}**
      
      - Email: **${organizations[0].email}**
  - Edit: |-
      sources[0]
    button: |-
      **Sources**

      % for item in sources:
      - ${ item }
      % endfor
  - Edit: 
      - other_technology_choices
    button: |-
      **Choices**

      % for item in other_technology_choices.true_values():
      - ${ item }
      % endfor
  - Edit: |-
      use_google_services
    button: |
      **Does ${ organizations[0].name } use Google services?**

      ${ word(yesno(use_google_services)) }
  - Edit: |-
      text_and_email
    button: |
      **Does ${ organizations[0].name } use text and email delivery services?**

      ${ word(yesno(text_and_email)) }
---
id: download Terms_and_conditions
event: Terms_and_conditions_download
question: |
  Download ${ organizations[0] }'s terms and conditions
subquestion: |
  ${ organizations[0] }'s terms and conditions and privacy policy are ready to download.
  
  View, download, and send the terms and conditions below. Click the "Edit answers" button to fix any mistakes.

  ${ action_button_html(url_action('review_Terms_and_conditions'), label='Edit answers', color='info') }
  
  
  ${ al_user_bundle.download_list_html(format="docx") }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=True) }

progress: 100
section: Download
---
# ALDocument objects specify the metadata for each template
objects:
  - Terms_and_conditions_attachment: ALDocument.using(title="Terms and conditions", filename="terms_and_conditions", enabled=True, has_addendum=False, )
---
# Bundles group the ALDocuments into separate downloads, such as for court and for the user
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[Terms_and_conditions_attachment], filename="terms_and_conditions", title="All forms to download for your records", enabled=True)
  - al_court_bundle: ALDocumentBundle.using(elements=[Terms_and_conditions_attachment],  filename="terms_and_conditions", title="All forms to deliver to court", enabled=True)
---
attachment:
  name: Terms and conditions
  filename: Terms_and_conditions
  variable name: Terms_and_conditions_attachment[i]
  skip undefined: True
  docx template file: terms_and_conditions.docx
  tagged pdf: True



